# Домашнее задание к занятию «Микросервисы: принципы» - `Rashevchenko Mikhail`

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

**<details><summary>Ответ:</summary>**    

| API Gateway              | Маршрутизация | Проверка auth | Терминация HTTPS |
|--------------------------|-----------------------|-------------------------|------------------|
| Amazon API Gateway       | Есть                  | Есть                    | Есть             |
| Kong                     | Есть                  | Есть                    | Есть             |
| Apigee                   | Есть                  | Есть                    | Есть             |
| Yandex API Gateway       | Есть                  | Есть                    | Есть             |
| NGINX Plus               | Есть                  | Есть                    | Есть             |
| Spring WebFlux           | Есть                  | Есть                    | Есть             |

Все представленные решение соответствуют заявленным требования.
Если инфраструктура размещается в облаке, то стоит рассмотреть вариант использования API Gateway облачного провайдера. Из минусов только платное использование, но получаем более простую настройку и все функции из коробки.
Если инфраструктура on-premise, то можно использовать любой: HAProxy, Nginx, Kong.

</details>

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

**<details><summary>Ответ:</summary>**     

| Брокер сообщений       | Поддержка кластеризации | Хранение сообщений на диске | Высокая скорость работы | Поддержка форматов сообщений | Разделение прав доступа | Простота эксплуатации |
|------------------------|-------------------------|----------------------------|-------------------------|------------------------------|-------------------------|----------------------|
| Apache Kafka           | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| RabbitMQ               | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| Apache ActiveMQ        | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| NATS Streaming         | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| Google Cloud Pub/Sub   | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |
| Apache Pulsar          | Есть                    | Есть                       | Есть                    | Есть                         | Есть                    | Есть                   |

Для приложений, которым требуется высокая скорость работы, кластеризация, хранение сообщений на диске и поддержка различных форматов сообщений, лучшим выбором является Apache Kafka. Для приложений, которым требуется высокая надежность, кластеризация и поддержка различных форматов сообщений, лучшим выбором является RabbitMQ. Для остальных приложений нужно выбирать между Redis и Beanstalk.

Обоснование:

1. Поддержка кластеризации:     
   Apache Kafka обеспечивает высокую надежность и отказоустойчивость путем поддержки кластеризации. Это позволяет создать распределенный брокер сообщений с репликацией данных, что обеспечивает сохранность сообщений и возможность продолжения работы даже при отказе узлов.

2. Хранение сообщений на диске:    
   Apache Kafka хранит сообщения на диске в процессе доставки, что обеспечивает сохранность сообщений в случае временных сбоев и позволяет обрабатывать большие объемы данных.

3. Высокая скорость работы:    
   Apache Kafka предлагает высокую пропускную способность и низкую задержку при передаче сообщений. Он способен обрабатывать миллионы сообщений в секунду, что является важным при работе с высоконагруженными системами.

4. Поддержка различных форматов сообщений:   
   Apache Kafka поддерживает гибкий формат данных, что позволяет передавать сообщения в различных форматах, включая JSON, Avro и другие.

5. Разделение прав доступа:   
   Apache Kafka предоставляет механизм разделения прав доступа к различным потокам сообщений. Это позволяет управлять доступом и обеспечить безопасность передачи данных в системе.

6. Простота эксплуатации:   
   Apache Kafka имеет развитое сообщество пользователей и обширную документацию, что облегчает его внедрение, настройку и поддержку. Он также интегрируется с различными инструментами и фреймворками, что упрощает его использование в разных сценариях.
    
</details>
